# YAML file containing lengthy data sets to be used within assertion tests
# for the MAGIC package.

test_buildfgssteps:
    test_correct_count_rate:
        # Data produced in notebooks/writing_test_data.ipynb
        guider1:
            CAL:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [1210.0, 30200.0]
                time_normed_im: [0.0, 166565.97]
                cds: [-20.0, 65000.0]
                CAL: [1215.0, 65535.0]
            ID:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [1210.0, 30200.0]
                time_normed_im: [-1.7679394e-20, 5283.9473]
                cds: [-20.0, 5500.0]
                strips: [1206.0, 30410.0]
                ID: [1206.0, 30410.0]
            ACQ1:
                countrates: [65596.]
                bias: [11920.0, 87850.0]
                time_normed_im: [0.0039671236, 1977.3064]
                cds: [-30.0, 65000.0]
                ACQ1: [11920.0, 65540.0]
            ACQ2:
                countrates: [65596.]
                bias: [13940.0, 81660.0]
                time_normed_im: [0.02249858, 137.2947]
                cds: [-20.0, 65000.0]
                ACQ2: [13940.0, 65540.0]
            TRK:
                countrates: [65596.]
                bias: [13940.0, 81670.0]
                time_normed_im: [0.02249858, 137.2947]
                TRK: [13940.0, 65540.0]
            LOSTRK:
                countrates: [65596.]
                time_normed_im: [0.0060026245, 137.2947]
                LOSTRK: [6.730232e-05, 1.5393685]
        guider2:
            CAL:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [5030.0, 86030.0]
                time_normed_im: [0.0, 166565.97]
                cds: [-20.0, 65000.0]
                CAL: [5030.0, 65540.0]
            ID:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [5020.0, 86030.0]
                time_normed_im: [-1.7679394e-20, 5283.9473]
                cds: [-20.0, 65000.0]
                strips: [5020.0, 65540.0]
                ID: [5020.0, 65540.0]
            ACQ1:
                countrates: [65596.]
                bias: [9000.0, 71200.0]
                time_normed_im: [0.0039671236, 1977.3064]
                cds: [-20.0, 65000.0]
                ACQ1: [9000.0, 65540.0]
            ACQ2:
                countrates: [65596.]
                bias: [10950.0, 66790.0]
                time_normed_im: [0.02249858, 137.2947]
                cds: [-20.0, 65000.0]
                ACQ2: [10950.0, 65540.0]
            TRK:
                countrates: [65596.]
                bias: [10940.0, 66800.0]
                time_normed_im: [0.02249858, 137.2947]
                TRK: [10940.0, 65540.0]
            LOSTRK:
                countrates: [65596.]
                time_normed_im: [0.0060026245, 137.2947]
                LOSTRK: [6.730232e-05, 1.5393685]

    test_shift_to_id_attitude:
        guiding_selections_coords:
            [
                [[1024., 1024.],
                 [ 997., 1178.],
                 [1048., 1179.],
                 [1072., 1247.],
                 [1023., 1275.]],

                [[ 986., 1688.],
                 [ 959., 1842.],
                 [1010., 1843.],
                 [1034., 1911.],
                 [ 985., 1939.]],

                [[1003., 1697.],
                 [ 976., 1851.],
                 [1027., 1852.],
                 [1051., 1920.],
                 [1002., 1948.]]
            ]
        all_found_psfs_coords:
            [
                [[1024., 1024.],
                 [1021., 1162.],
                 [ 997., 1178.],
                 [1048., 1179.],
                 [1072., 1190.],
                 [ 996., 1205.],
                 [1047., 1205.],
                 [1072., 1219.],
                 [ 997., 1233.],
                 [1048., 1233.],
                 [1022., 1247.],
                 [1072., 1247.],
                 [ 998., 1258.],
                 [1045., 1259.],
                 [1023., 1275.]],

                [[ 986., 1688.],
                 [ 983., 1826.],
                 [ 959., 1842.],
                 [1010., 1843.],
                 [1034., 1854.],
                 [ 958., 1869.],
                 [1009., 1869.],
                 [1034., 1883.],
                 [ 959., 1897.],
                 [1010., 1897.],
                 [ 984., 1911.],
                 [1034., 1911.],
                 [ 960., 1922.],
                 [1007., 1923.],
                 [ 985., 1939.]],

                [[1003., 1697.],
                 [1000., 1835.],
                 [ 976., 1851.],
                 [1027., 1852.],
                 [1051., 1863.],
                 [ 975., 1878.],
                 [1026., 1878.],
                 [1051., 1892.],
                 [ 976., 1906.],
                 [1027., 1906.],
                 [1001., 1920.],
                 [1051., 1920.],
                 [ 977., 1931.],
                 [1024., 1932.],
                 [1002., 1948.]]
            ]

test_convert_image:
    test_transform_sci_to_fgs_raw:
        [
            [[ 993,  975],
              [1021,  975],
              [1050,  975],
              [1007,  999],
              [1061,  999],
              [1035, 1000],
              [ 981, 1002],
              [1216, 1023],
              [ 965, 1024],
              [ 993, 1025],
              [1078, 1026],
              [ 982, 1049],
              [1007, 1050],
              [1062, 1050],
              [1035, 1051]],

            [[ 997,  975],
             [1026,  975],
             [1054,  975],
             [ 986,  999],
             [1040,  999],
             [1012, 1000],
             [1066, 1002],
             [ 831, 1023],
             [1082, 1024],
             [1054, 1025],
             [ 969, 1026],
             [1065, 1049],
             [ 985, 1050],
             [1040, 1050],
             [1012, 1051]]
        ]

    test_transform_nircam_raw_to_fgs_raw:
        [
            [[1035,  996],
             [1007,  997],
             [1062,  997],
             [ 982,  998],
             [1078, 1021],
             [ 993, 1022],
             [ 965, 1023],
             [1216, 1024],
             [ 981, 1045],
             [1035, 1047],
             [1007, 1048],
             [1061, 1048],
             [ 993, 1072],
             [1021, 1072],
             [1050, 1072]],

            [[ 997,  975],
             [1026,  975],
             [1054,  975],
             [ 986,  999],
             [1040,  999],
             [1012, 1000],
             [1066, 1002],
             [ 831, 1023],
             [1082, 1024],
             [1054, 1025],
             [ 969, 1026],
             [1065, 1049],
             [ 985, 1050],
             [1040, 1050],
             [1012, 1051]],

            [[1012,  996],
             [ 985,  997],
             [1040,  997],
             [1065,  998],
             [ 969, 1021],
             [1054, 1022],
             [1082, 1023],
             [ 831, 1024],
             [1066, 1045],
             [1012, 1047],
             [ 986, 1048],
             [1040, 1048],
             [ 997, 1072],
             [1026, 1072],
             [1054, 1072]],

            [[ 993,  975],
             [1021,  975],
             [1050,  975],
             [1007,  999],
             [1061,  999],
             [1035, 1000],
             [ 981, 1002],
             [1216, 1023],
             [ 965, 1024],
             [ 993, 1025],
             [1078, 1026],
             [ 982, 1049],
             [1007, 1050],
             [1062, 1050],
             [1035, 1051]]
        ]

test_segment_guiding:
    test_generate_segment_override_file:
        [
            'sts -gs_select 01141007001 -star1 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only2 = 10, 90.963969, -67.351986, 238425.0, 214582.5',
            'sts -gs_select 01141007001 -star1 = 4, 90.970810, -67.357738, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.964892, -67.348467, 221534.0, 199380.6 -ref_only2 = 10, 90.948671, -67.347619, 238425.0, 214582.5',
            'sts -gs_select 01141007001 -star1 = 1, 90.987850, -67.355022, 190058.0, 171052.2, 12, 6 -ref_only1 = 12, 90.963123, -67.355541, 319635.0, 287671.5 -ref_only2 = 6, 90.972558, -67.350638, 329898.0, 296908.2',
            'sts -gs_select 01141007001 -star1 = 1, 90.987850, -67.355022, 190058.0, 171052.2, 2, 3 -star2 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 0, 17, 12, 2 -ref_only1 = 2, 90.986990, -67.358569, 291234.0, 262110.6 -ref_only2 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only3 = 12, 90.963123, -67.355541, 319635.0, 287671.5 -ref_only4 = 17, 90.954592, -67.356915, 178466.0, 160619.4 -ref_only5 = 0, 90.953775, -67.360493, 245009.0, 220508.1'
        ]

    test_photometry_override_file_wo_obs_visit:
        [
            'sts -gs_select 01141007 -count_rate_factor=0.6000 -count_rate_uncertainty_factor=0.7000',
            'sts -gs_select 01141 -count_rate_factor=0.6000 -count_rate_uncertainty_factor=0.7000',
            'sts -gs_select 01141001001, 01141002001 -count_rate_factor=0.6000 -count_rate_uncertainty_factor=0.7000'
        ]

    test_split_obs_num:
        [
            [[2],                   '2'],
            [[2, 4, 6],             '2,4,6'],
            [[13, 14, 15],          '13-15'],
            [[5, 7, 10, 11, 12],    '5,7,10-12'],
            [[1, 3, 5],             '1,3,5'],
            [[5, 7, 10, 11, 12],    '5,7,10-12']
        ]

    test_segment_override_file_single_obs:
        [
            'sts -gs_select 01141002001 -star1 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only2 = 10, 90.963969, -67.351986, 238425.0, 214582.5',
            'sts -gs_select 01141002001, 01141004001, 01141006001 -star1 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only2 = 10, 90.963969, -67.351986, 238425.0, 214582.5',
            'sts -gs_select 01141013001, 01141014001, 01141015001 -star1 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only2 = 10, 90.963969, -67.351986, 238425.0, 214582.5',
            'sts -gs_select 01141005001, 01141007001, 01141010001, 01141011001, 01141012001 -star1 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only2 = 10, 90.963969, -67.351986, 238425.0, 214582.5',
            'sts -gs_select 01141001001, 01141003001, 01141005001 -star1 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only2 = 10, 90.963969, -67.351986, 238425.0, 214582.5',
            'sts -gs_select 01141005001, 01141007001, 01141010001, 01141011001, 01141012001 -star1 = 4, 90.986120, -67.362103, 263893.0, 237503.7, 3, 10 -ref_only1 = 3, 90.980194, -67.352832, 221534.0, 199380.6 -ref_only2 = 10, 90.963969, -67.351986, 238425.0, 214582.5',
        ]

    test_photometry_override_file_multiple_obs:
      [
          'sts -gs_select 01141002001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141002001, 01141004001, 01141006001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141013001, 01141014001, 01141015001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141005001, 01141007001, 01141010001, 01141011001, 01141012001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141001001, 01141003001, 01141005001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141005001, 01141007001, 01141010001, 01141011001, 01141012001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000'
      ]

test_select_psfs:
    test_select_psfs_without_file:
        non-ga: |
            # label y x countrate
            F 707.0000 848.0000 8053.0000
            O 716.0000 1258.0000 27255.0000
            J 719.0000 1058.0000 15701.0000
            F 722.0000 865.0000 5286.0000
            F 739.0000 874.0000 4320.0000
            H 861.0000 960.0000 47211.0000
            Q 879.0000 1306.0000 18428.0000
            C 880.0000 771.0000 15725.0000
            L 882.0000 1166.0000 5537.0000
            L 906.0000 1162.0000 5880.0000
            A 1024.0000 692.0000 17285.0000
            R 1032.0000 1412.0000 45795.0000
            N 1042.0000 1245.0000 106899.0000
            E 1048.0000 881.0000 29745.0000
            P 1181.0000 1321.0000 30061.0000
            K 1187.0000 1152.0000 32794.0000
            B 1207.0000 801.0000 25434.0000
            G 1223.0000 977.0000 82360.0000
            I 1340.0000 1077.0000 41864.0000
            M 1342.0000 1258.0000 31596.0000
            D 1377.0000 866.0000 34275.0000
        ga: |
            # label y x countrate
            F 723.0000 860.0000 1183.0000
            O 723.0000 1259.0000 17949.0000
            J 724.0000 1060.0000 15276.0000
            H 861.0000 961.0000 46459.0000
            C 880.0000 771.0000 15725.0000
            Q 880.0000 1306.0000 16855.0000
            L 896.0000 1167.0000 3370.0000
            A 1026.0000 697.0000 15731.0000
            R 1033.0000 1414.0000 40876.0000
            N 1042.0000 1246.0000 104626.0000
            E 1049.0000 885.0000 18002.0000
            P 1182.0000 1322.0000 31191.0000
            K 1188.0000 1152.0000 31623.0000
            B 1208.0000 801.0000 24279.0000
            G 1223.0000 978.0000 77198.0000
            I 1340.0000 1077.0000 41864.0000
            M 1342.0000 1258.0000 31596.0000
            D 1376.0000 868.0000 31524.0000
        mimf: |
            # label y x countrate
            A 1248.0000 858.0000 237576.0000
