# YAML file containing lengthy data sets to be used within assertion tests
# for the MAGIC package.

test_buildfgssteps:
    test_correct_count_rate:
        # Data produced in notebooks/writing_test_data.ipynb
        guider1:
            CAL:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [1210.0, 30270.0]
                time_normed_im: [-0.001770345, 184493.3]
                cds: [-20.0, 65000.0]
                CAL: [1210.0, 65540.0]
            ID:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [1210.0, 30290.0]
                time_normed_im: [-5.68109e-05, 5920.4453]
                cds: [-20.0, 6100.0]
                strips: [1210.0, 30290.0]
                ID: [1210.0, 30290.0]
            ACQ1:
                countrates: [65596.]
                bias: [6460.0, 26800.0]
                time_normed_im: [0.0036995418, 2201.8406]
                cds: [-20.0, 4710.0]
                ACQ1: [6460.0, 26800.0]
            ACQ2:
                countrates: [65596.]
                bias: [6460.0, 16890.0]
                time_normed_im: [0.019422999, 152.88527]
                cds: [-20.0, 700.0]
                ACQ2: [6460.0, 16900.0]
            TRK:
                countrates: [65596.]
                bias: [6460.0, 16890.0]
                time_normed_im: [0.019422999, 152.88527]
                TRK: [6460.0, 16910.0]
            LOSTRK:
                countrates: [65596.]
                time_normed_im: [0.0059055714, 152.88527]
                LOSTRK: [6.60739e-05, 1.7105417]
        guider2:
            CAL:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [40.0, 29350.0]
                time_normed_im: [-0.001770345, 184493.3]
                cds: [-20.0, 65000.0]
                CAL: [40.0, 65540.0]
            ID:
                countrates: [65596., 91475., 91549., 95731., 95747.]
                bias: [40.0, 29350.0]
                time_normed_im: [-5.68109e-05, 5920.4453]
                cds: [-20.0, 6090.0]
                strips: [30.0, 30350.0]
                ID: [40.0, 30270.0]
            ACQ1:
                countrates: [65596.]
                bias: [6610.0, 27630.0]
                time_normed_im: [0.0036995418, 2201.8406]
                cds: [-20.0, 4630.0]
                ACQ1: [6610.0, 27630.0]
            ACQ2:
                countrates: [65596.]
                bias: [7690.0, 21220.0]
                time_normed_im: [0.019422999, 152.88527]
                cds: [-10.0, 700.0]
                ACQ2: [7690.0, 21260.0]
            TRK:
                countrates: [65596.]
                bias: [7680.0, 21220.0]
                time_normed_im: [0.019422999, 152.88527]
                TRK: [7680.0, 21260.0]
            LOSTRK:
                countrates: [65596.]
                time_normed_im: [0.0059055714, 152.88527]
                LOSTRK: [6.60739e-05, 1.7105417]

    test_shift_to_id_attitude:
        guiding_selections_coords:
            [[1023.5, 1023.5],
             [ 996.5, 1177.5],
             [1047.5, 1178.5],
             [1071.5, 1246.5],
             [1022.5, 1274.5]]

        all_found_psfs_coords:
            [[1023.5, 1023.5],
             [1020.5, 1161.5],
             [ 996.5, 1177.5],
             [1047.5, 1178.5],
             [1071.5, 1189.5],
             [ 995.5, 1204.5],
             [1046.5, 1204.5],
             [1071.5, 1218.5],
             [ 996.5, 1232.5],
             [1047.5, 1232.5],
             [1021.5, 1246.5],
             [1071.5, 1246.5],
             [ 997.5, 1257.5],
             [1044.5, 1258.5],
             [1022.5, 1274.5]]

test_convert_image:
    test_transform_sci_to_fgs_raw:
        [
            [[ 993,  975],
              [1021,  975],
              [1050,  975],
              [1007,  999],
              [1061,  999],
              [1035, 1000],
              [ 981, 1002],
              [1216, 1023],
              [ 965, 1024],
              [ 993, 1025],
              [1078, 1026],
              [ 982, 1049],
              [1007, 1050],
              [1062, 1050],
              [1035, 1051]],

            [[ 997,  975],
             [1026,  975],
             [1054,  975],
             [ 986,  999],
             [1040,  999],
             [1012, 1000],
             [1066, 1002],
             [ 831, 1023],
             [1082, 1024],
             [1054, 1025],
             [ 969, 1026],
             [1065, 1049],
             [ 985, 1050],
             [1040, 1050],
             [1012, 1051]]
        ]

    test_transform_nircam_raw_to_fgs_raw:
        [
            [[1035,  996],
             [1007,  997],
             [1062,  997],
             [ 982,  998],
             [1078, 1021],
             [ 993, 1022],
             [ 965, 1023],
             [1216, 1024],
             [ 981, 1045],
             [1035, 1047],
             [1007, 1048],
             [1061, 1048],
             [ 993, 1072],
             [1021, 1072],
             [1050, 1072]],

            [[ 997,  975],
             [1026,  975],
             [1054,  975],
             [ 986,  999],
             [1040,  999],
             [1012, 1000],
             [1066, 1002],
             [ 831, 1023],
             [1082, 1024],
             [1054, 1025],
             [ 969, 1026],
             [1065, 1049],
             [ 985, 1050],
             [1040, 1050],
             [1012, 1051]],

            [[1012,  996],
             [ 985,  997],
             [1040,  997],
             [1065,  998],
             [ 969, 1021],
             [1054, 1022],
             [1082, 1023],
             [ 831, 1024],
             [1066, 1045],
             [1012, 1047],
             [ 986, 1048],
             [1040, 1048],
             [ 997, 1072],
             [1026, 1072],
             [1054, 1072]],

            [[ 993,  975],
             [1021,  975],
             [1050,  975],
             [1007,  999],
             [1061,  999],
             [1035, 1000],
             [ 981, 1002],
             [1216, 1023],
             [ 965, 1024],
             [ 993, 1025],
             [1078, 1026],
             [ 982, 1049],
             [1007, 1050],
             [1062, 1050],
             [1035, 1051]]
        ]

test_segment_guiding:
    test_generate_segment_override_file:
        [
            "sts -gs_select 01141007001 -star1 = 1, 90.986049, -67.361953, 263893.0, 237503.7, 2, 3 -ref_only1 = 2, 90.980300, -67.352779, 221534.0, 199380.6 -ref_only2 = 3, 90.964324, -67.352181, 238425.0, 214582.5",
            "sts -gs_select 01141007001 -star1 = 1, 90.970960, -67.357803, 263893.0, 237503.7, 2, 3 -ref_only1 = 2, 90.965218, -67.348628, 221534.0, 199380.6 -ref_only2 = 3, 90.949245, -67.348029, 238425.0, 214582.5",
            "sts -gs_select 01141007001 -star1 = 1, 90.986049, -67.361953, 263893.0, 237503.7, 2, 3 -star2 = 4, 90.971906, -67.354227, 279717.0, 251745.3, 5, 6 -ref_only1 = 2, 90.980300, -67.352779, 221534.0, 199380.6 -ref_only2 = 3, 90.964324, -67.352181, 238425.0, 214582.5 -ref_only3 = 5, 90.977642, -67.363488, 116852.0, 105166.8 -ref_only4 = 6, 90.969138, -67.364891, 166221.0, 149598.9",
            "sts -gs_select 01141007001 -star1 = 1, 90.986049, -67.361953, 263893.0, 237503.7, 2, 3 -star2 = 1, 90.986049, -67.361953, 263893.0, 237503.7, 2, 4 -ref_only1 = 2, 90.980300, -67.352779, 221534.0, 199380.6 -ref_only2 = 3, 90.964324, -67.352181, 238425.0, 214582.5 -ref_only3 = 4, 90.969138, -67.364891, 166221.0, 149598.9",
            "sts -gs_select 01141007001 -star1 = 1, 90.987859, -67.354849, 190058.0, 171052.2, 2, 3 -ref_only1 = 2, 90.963395, -67.355716, 319635.0, 287671.5 -ref_only2 = 3, 90.972808, -67.350718, 329898.0, 296908.2",
            "sts -gs_select 01141007001 -star1 = 1, 90.987859, -67.354849, 190058.0, 171052.2, 2, 3 -star2 = 4, 90.986049, -67.361953, 263893.0, 237503.7, 1, 5, 6, 2 -ref_only1 = 2, 90.986954, -67.358401, 291234.0, 262110.6 -ref_only2 = 3, 90.980300, -67.352779, 221534.0, 199380.6 -ref_only3 = 5, 90.954105, -67.360775, 245009.0, 220508.1 -ref_only4 = 6, 90.963395, -67.355716, 319635.0, 287671.5",
            "sts -gs_select 01141007001 -star1 = 1, 90.966837, -67.354642, 94754.0, 85278.6, 2 -star2 = 3, 90.969520, -67.357090, 95882.0, 86293.8, 4 -ref_only1 = 2, 90.973584, -67.358182, 138287.0, 124458.3 -ref_only2 = 4, 90.969876, -67.358526, 135010.0, 121509.0",
            "sts -gs_select 01141007001 -star1 = 1, 90.966837, -67.354642, 94754.0, 85278.6, 2 -star2 = 1, 90.966837, -67.354642, 94754.0, 85278.6, 3 -ref_only1 = 2, 90.973584, -67.358182, 138287.0, 124458.3 -ref_only2 = 3, 90.971921, -67.359059, 138307.0, 124476.3"
        ]

    test_photometry_override_file_wo_obs_visit:
        [
            'sts -gs_select 01141007 -count_rate_factor=0.6000 -count_rate_uncertainty_factor=0.7000',
            'sts -gs_select 01141 -count_rate_factor=0.6000 -count_rate_uncertainty_factor=0.7000',
            'sts -gs_select 01141001001, 01141002001 -count_rate_factor=0.6000 -count_rate_uncertainty_factor=0.7000'
        ]

    test_split_obs_num:
        [
            [[2],                   '2'],
            [[2, 4, 6],             '2,4,6'],
            [[13, 14, 15],          '13-15'],
            [[5, 7, 10, 11, 12],    '5,7,10-12'],
            [[1, 3, 5],             '1,3,5'],
            [[5, 7, 10, 11, 12],    '5,7,10-12']
        ]

    test_segment_override_file_single_obs:
        [
            'sts -gs_select 01141002001 -star1 = 1, 90.986049, -67.361953, 263893.0, 237503.7, 2, 3 -ref_only1 = 2, 90.980300, -67.352779, 221534.0, 199380.6 -ref_only2 = 3, 90.964324, -67.352181, 238425.0, 214582.5',
        ]

    test_photometry_override_file_multiple_obs:
      [
          'sts -gs_select 01141002001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141002001, 01141004001, 01141006001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141013001, 01141014001, 01141015001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141005001, 01141007001, 01141010001, 01141011001, 01141012001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141001001, 01141003001, 01141005001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000',
          'sts -gs_select 01141005001, 01141007001, 01141010001, 01141011001, 01141012001 -count_rate_factor=0.7000 -count_rate_uncertainty_factor=0.5000'
      ]

test_select_psfs:
    test_select_psfs_without_file:
        non-ga: |
            # label y x countrate
            F 707.0000 848.0000 8053.0000
            O 716.0000 1258.0000 27255.0000
            J 719.0000 1058.0000 15701.0000
            F 722.0000 865.0000 5286.0000
            F 739.0000 874.0000 4320.0000
            H 861.0000 960.0000 47211.0000
            Q 879.0000 1306.0000 18428.0000
            C 880.0000 771.0000 15725.0000
            L 882.0000 1166.0000 5537.0000
            L 906.0000 1162.0000 5880.0000
            A 1024.0000 692.0000 17285.0000
            R 1032.0000 1412.0000 45795.0000
            N 1042.0000 1245.0000 106899.0000
            E 1048.0000 881.0000 29745.0000
            P 1181.0000 1321.0000 30061.0000
            K 1187.0000 1152.0000 32794.0000
            B 1207.0000 801.0000 25434.0000
            G 1223.0000 977.0000 82360.0000
            I 1340.0000 1077.0000 41864.0000
            M 1342.0000 1258.0000 31596.0000
            D 1377.0000 866.0000 34275.0000
        ga: |
            # label y x countrate
            F 723.0000 860.0000 1183.0000
            O 723.0000 1259.0000 17949.0000
            J 724.0000 1060.0000 15276.0000
            H 861.0000 961.0000 46459.0000
            C 880.0000 771.0000 15725.0000
            Q 880.0000 1306.0000 16855.0000
            L 896.0000 1167.0000 3370.0000
            A 1026.0000 697.0000 15731.0000
            R 1033.0000 1414.0000 40876.0000
            N 1042.0000 1246.0000 104626.0000
            E 1049.0000 885.0000 18002.0000
            P 1182.0000 1322.0000 31191.0000
            K 1188.0000 1152.0000 31623.0000
            B 1208.0000 801.0000 24279.0000
            G 1223.0000 978.0000 77198.0000
            I 1340.0000 1077.0000 41864.0000
            M 1342.0000 1258.0000 31596.0000
            D 1376.0000 868.0000 31524.0000
        mimf: |
            # label y x countrate
            A 1248.0000 858.0000 237576.0000
    test_yaml_file:
      cols_order: [[1,2],
                  [11,15],
                  [10,11],
                  [1,6],
                  [4,11],
                  [10,11],
                  [6,14],
                  [2,8],
                  [8,13],
                  [10,15],
                  [15,14],
                  ]
      cols_list: [[[723, 787, 6915], [723, 1186, 453]],
                  [[1049, 1161, 6933], [1223, 1068, 29740]],
                  [[1042, 800, 40309], [1049, 1161, 6933]],
                  [[723, 787, 6915], [880, 1275, 6055]],
                  [[861, 1085, 17897], [1049, 1161, 6933]],
                  [[1042, 800, 40309], [861, 1085, 17897]],
                  [[880, 1275, 6055], [1208, 1245, 9351]],
                  [[723, 1186, 453], [1026, 1349, 6058]],
                  [[1026, 1349, 6058], [1188, 894, 12182]],
                  [[1042, 800, 40309], [1223, 1068, 29740]],
                  [[1223, 1068, 29740], [1208, 1245, 9351.0000]],
                 ]
      all_cols: [['F', '723.0000', '787.0000', '6915.0000'],
                ['O', '723.0000', '1186.0000', '453.0000'],
                ['J', '724.0000', '986.0000', '5883.0000'],
                ['L', '861.0000', '1085.0000', '17897.0000'],
                ['C', '880.0000', '740.0000', '6492.0000'],
                ['Q', '880.0000', '1275.0000', '6055.0000'],
                ['H', '896.0000', '879.0000', '1296.0000'],
                ['R', '1026.0000', '1349.0000', '6058.0000'],
                ['A', '1033.0000', '632.0000', '15746.0000'],
                ['E', '1042.0000', '800.0000', '40309.0000'],
                ['N', '1049.0000', '1161.0000', '6933.0000'],
                ['B', '1182.0000', '724.0000', '12014.0000'],
                ['G', '1188.0000', '894.0000', '12182.0000'],
                ['P', '1208.0000', '1245.0000', '9351.0000'],
                ['K', '1223.0000', '1068.0000', '29740.0000'],
                ['I', '1340.0000', '969.0000', '16127.0000'],
                ['D', '1342.0000', '788.0000', '12170.0000'],
                ['M', '1376.0000', '1178.0000', '12143.0000']]
